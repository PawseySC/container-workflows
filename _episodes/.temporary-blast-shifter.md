### Using Shifter with a job scheduler ###

Shifter is compatible with SLURM, the job scheduler installed on Pawsey HPC systems.

The following script permits to execute the bioinformatics example of a previous lesson using the Shifter and the job scheduler:

```
#!/bin/bash -l
  
#SBATCH --account=<your-pawsey-project>
#SBATCH --partition=workq
#SBATCH --ntasks=1
#SBATCH --time=00:05:00
#SBATCH --export=NONE
#SBATCH --job-name=blast

module load shifter

# download sample inputs
wget http://www.uniprot.org/uniprot/P04156.fasta
curl -O ftp://ftp.ncbi.nih.gov/refseq/D_rerio/mRNA_Prot/zebrafish.1.protein.faa.gz
gunzip zebrafish.1.protein.faa.gz

# prepare database
srun --export=all shifter run biocontainers/blast:v2.2.31_cv2 makeblastdb -in zebrafish.1.protein.faa -dbtype prot

# align with BLAST
srun --export=all shifter run biocontainers/blast:v2.2.31_cv2 blastp -query P04156.fasta -db zebrafish.1.protein.faa -out results.txt
```

Now you can create a test directory,

```
> mkdir blast_example
> cd blast_example
```

use your favourite text editor to copy paste the script above in a file called `blast.sh` (remember to specify your Pawsey account ID!),

and then submit this script using SLURM:

```
> sbatch blast.sh
```



